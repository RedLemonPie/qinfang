<template>
  <view class="container">
    <view class="main">
      <view class="qrcode item">
        <canvas style="width: 200px; height: 200px;" canvas-id="myQrcode"></canvas>
        <view class="tips">{{text}}</view>
      </view>
    </view>
  </view>
</template>

<script>
  import wepy from 'wepy'
  // import drawQrcode from 'weapp-qrcode'
  let drawQrcode = require('weapp-qrcode')
  export default class Index extends wepy.page {
    props = {
      text: {
        type: String,
        default: '0 '
      }
    }
    data = {
      inputValue: ''
    }
    methods = {
    }
    watch = {
      text(newValue, oldValue) {
        this.draw()
      }
    }
    onLoad() {
      this.draw()
    }
    draw() {
      drawQrcode({
        width: 200,
        height: 200,
        canvasId: 'myQrcode',
        typeNumber: 6,
        text: this.text
      })
    }
  }
</script>

<style>
  Page {
    background-color: #383c42;
  }
  .main {
    width: 670rpx;
    margin: 40rpx auto 0;
    background: #fff;
    box-shadow: 0 0 2rpx 0 rgba(25, 29, 33, 0.15);
    border-radius: 12rpx;
    padding: 0 40rpx;
    box-sizing: border-box;
    position: relative;
  }
  .item {
    border-bottom: 2rpx solid #F4F5F7;
  }
  .qrcode {
    width: 590rpx;
    margin: 0 auto;
    padding: 50rpx 0 59rpx;
    border-top: 2rpx solid #F4F5F7;
  }
  .qrcode>view,
  .qrcode>text {
    text-align: center;
  }
  canvas {
    margin: 58rpx auto 0;
  }
  .type {
    margin-top: 24rpx;
    font-size: 28rpx;
    color: #585C64;
    line-height: 32rpx;
  }
</style>
